---
title: Item 29 - μ΄μ™•μ΄λ©΄ μ λ„¤λ¦­ νƒ€μ…μΌλ΅ λ§λ“¤λΌ
date: 2024-09-27 07:50:00 +0900
categories: [μ΄ν™ν‹°λΈ μλ°”, chapter5]
tags: [μ΄ν™ν‹°λΈ μλ°”]
---

## **μ•„μ΄ν… 7μ—μ„ λ‹¤λ£¬ μ¤νƒ μ½”λ“**

μ΄ ν΄λμ¤λ” μ›λ μ λ„¤λ¦­ νƒ€μ…μ΄μ–΄μ•Ό λ§λ•…ν•λ‹¤.

```java
// Object κΈ°λ° μ¤νƒ - μ λ„¤λ¦­μ΄ μ μ‹¤ν• κ°•λ ¥ ν›„λ³΄!
public class Stack {
    private Object[] elements;
    private int size = 0;
    private static final int DEFAULT_INITIAL_CAPACITY = 16;
	
    public Stack() {
        elements = new Object[DEFAULT_INITIAL_CAPACITY];
    }
	
    public void push(Object e) {
        ensureCapacity();
        elements[size++] = e;
    }
	
    public Object pop() {
        if(size == 0) throw new EmptyStackException();
        Object result = elements[--size];
        elements[size] = null;
        return result;
    }
	
    //.. μƒλµ
}
```
- ν΄λΌμ΄μ–ΈνΈλ” μ¤νƒμ—μ„ κΊΌλ‚Έ κ°μ²΄λ¥Ό ν•λ³€ν™ν•΄μ•Ό ν•λ”λ°, μ΄λ• λ°νƒ€μ„ μ¤λ¥κ°€ λ‚  μ„ν—μ΄ μλ‹¤.


## **μΌλ° ν΄λμ¤λ¥Ό μ λ„¤λ¦­ ν΄λμ¤λ΅ λ§λ“λ” λ°©λ²•**
1. **ν΄λμ¤ μ„ μ–Έμ— νƒ€μ… λ§¤κ°λ³€μλ¥Ό μ¶”κ°€ν•λ‹¤.**
2. **`Object`λ¥Ό μ μ ν• νƒ€μ… λ§¤κ° λ³€μλ΅ λ°”κΎΌλ‹¤.**

```java
// μ λ„¤λ¦­ μ¤νƒμΌλ΅ κ°€λ” μ²« λ‹¨κ³„ - μ»΄νμΌ λμ§€ μ•λ”λ‹¤.
public class Stack<E> {
    private E[] elements;
    private int size = 0;
    private static final int DEFAULT_INITIAL_CAPACITY = 16;
	
    public Stack() {
        elements = new E[DEFAULT_INITIAL_CAPACITY]; // Error
    }
	
    public void push(E e) {
        ensureCapacity();
        elements[size++] = e;
    }
	
    public E pop() {
        if (size == 0) {
            throw new EmptyStackException();
        }
		
        E result = elements[--size];
        elements[size] = null;
        return result;
    }
	
    // .. μƒλµ
}
```
- μ„ μ½”λ“λ” μ»΄νμΌ μ¤λ¥κ°€ λ°μƒν•λ‹¤. μ΄λ” [μ•„μ΄ν… 28](https://shinminjin.github.io/posts/item28/)μ—μ„λ„ λ§ν• λ‚΄μ©μ΄λ‹¤.
- `E`μ™€ κ°™μ€ μ‹¤μ²΄ν™” λ¶κ°€ νƒ€μ…μΌλ΅λ” λ°°μ—΄μ„ λ§λ“¤ μ μ—†λ‹¤.


## **ν•΄κ²° λ°©μ• (λΉ„κ²€μ‚¬ ν•λ³€ν™)**
### **(1) Object λ°°μ—΄μ„ μƒμ„±ν• λ‹¤μ μ λ„¤λ¦­ λ°°μ—΄λ΅ ν•λ³€ν™ν•λ‹¤.**
```java
@SuppressWarnings("unchecked")
public Stack() {
    elements = (E[]) new Object[DEFAULT_INITIAL_CAPACITY];
}
```
- μ»΄νμΌλ¬λ” μ¤λ¥ λ€μ‹  κ²½κ³ λ¥Ό λ‚΄λ³΄λ‚Έλ‹¤.
- μ‹¤ν–‰μ€ ν•  μ μμ§€λ§ νƒ€μ… μ•μ „ν•μ§€ μ•μ•„μ„, λ°νƒ€μ„ μ¤λ¥κ°€ λ°μƒν•  μλ„ μλ‹¤.
- λ”°λΌμ„ μ΄ λΉ„κ²€μ‚¬ ν•λ³€ν™μ΄ ν”„λ΅κ·Έλ¨μ νƒ€μ… μ•μ •μ„±μ„ ν•΄μΉμ§€ μ•μμ„ μ¤μ¤λ΅ ν™•μΈν•΄μ•Ό ν•λ‹¤.
    - λ°°μ—΄ elementsλ” private ν•„λ“μ— μ €μ¥λκ³ , ν΄λΌμ΄μ–ΈνΈλ΅ λ°ν™λκ±°λ‚ λ‹¤λ¥Έ λ©”μ„λ“μ— μ „λ‹¬λ  μΌμ΄ μ—†λ‹¤.
    - push λ©”μ„λ“λ¥Ό ν†µν•΄ λ°°μ—΄μ— μ €μ¥λλ” μ›μ†μ νƒ€μ…μ€ ν•­μƒ `E`λ‹¤.
    - λ”°λΌμ„ μ΄ λΉ„κ²€μ‚¬ ν•λ³€ν™μ€ ν™•μ‹¤ν μ•μ „ν•λ‹¤.
- λΉ„κ²€μ‚¬ ν•λ³€ν™μ΄ μ•μ „ν•¨μ„ μ§μ ‘ μ¦λ…ν–λ‹¤λ©΄ λ²”μ„λ¥Ό μµμ†λ΅ μΆν€ `@SuppressWarnings`  μ• λ„ν…μ΄μ…μΌλ΅ κ²½κ³ λ¥Ό μ¨κΈ°μ.
- μ΄ λ°©λ²•μ€ κ°€λ…μ„±μ΄ μΆ‹κ³  ν•λ³€ν™μ„ λ°°μ—΄ μƒμ„± μ‹ λ‹¨ ν•λ²λ§ ν•λ©΄ λλ‹¤.


### **(2) elements ν•„λ“μ νƒ€μ…μ„ E[]μ—μ„ Object[]λ΅ λ°”κΎΌλ‹¤.**
```java
// λ°°μ—΄μ„ μ‚¬μ©ν• μ½”λ“λ¥Ό μ λ„¤λ¦­μΌλ΅ λ§λ“λ” λ°©λ²• 2
// λΉ„κ²€μ‚¬ κ²½κ³ λ¥Ό μ μ ν μ¨κΈ΄λ‹¤
public E pop() {
    if (size == 0) {
        throw new EmptyStackException();
    }
	
    // pushμ—μ„ E νƒ€μ…λ§ ν—μ©ν•λ―€λ΅ μ΄ ν•λ³€ν™μ€ μ•μ „ν•λ‹¤.
    @SuppressWarnings("unchecked") E result = (E) elements[--size];
	
    elements[size] = null; // λ‹¤ μ“΄ μ°Έμ΅° ν•΄μ 
    return result;
}
```
- (E)λ΅ ν•λ³€ν™ ν•  λ• κ²½κ³ κ°€ λ¬λ‹¤. (Eλ” μ‹¤μ²΄ν™” λ¶κ°€ νƒ€μ…μ΄λ―€λ΅)
- pushμ—μ„ E νƒ€μ…λ§ ν—μ©ν•λ―€λ΅ μ΄ ν•λ³€ν™μ€ μ•μ „ν•λ‹¤λ” κ²ƒμ„ μ• μ μλ‹¤. - μ§μ ‘ μ¦λ…
- κ·Έλμ„ μµμ† λ²”μ„μΈ ν• λ‹Ήλ¬Έμ—μ„λ§ μ• λ„ν…μ΄μ…μ„ λ¶™μ—¬μ£Όμ–΄ κ²½κ³ λ¥Ό μ¨κ²¨μ£Όμ—λ‹¤.
- μ΄ λ°©λ²•μ€ λ°°μ—΄μ—μ„ μ›μ†λ¥Ό μ½μ„ λ•λ§λ‹¤ ν•λ³€ν™μ„ ν•΄μ¤μ•Όν•λ” λ¶νΈν•¨μ΄ μλ‹¤.


### **μλ¬Έ β“**
- β€**λ°°μ—΄λ³΄λ‹¤λ” λ¦¬μ¤νΈλ¥Ό μ°μ„ ν•λΌ**β€λ” μ•„μ΄ν… 28κ³Ό λ¨μμΈ κ²ƒ κ°™λ‹¤.
- μ λ„¤λ¦­ νƒ€μ… μ•μ—μ„ λ¦¬μ¤νΈλ¥Ό μ‚¬μ©ν•λ”κ² ν•­μƒ κ°€λ¥ν• κ²ƒλ„ μ•„λ‹κ³  κΌ­ λ” μΆ‹μ€ κ²ƒλ„ μ•„λ‹λ‹¤.
- μλ°”κ°€ λ¦¬μ¤νΈλ¥Ό κΈ°λ³Έ νƒ€μ…μΌλ΅ μ κ³µν•μ§€ μ•κΈ° λ•λ¬Έμ—, `ArrayList` κ°™μ€ μ λ„¤λ¦­ νƒ€μ…λ„ κ²°κµ­μ—λ” κΈ°λ³Έ νƒ€μ…μΈ λ°°μ—΄μ„ μ‚¬μ©ν•΄μ„ κµ¬ν„ν•΄μ•Ό ν•λ‹¤.


## **μ λ„¤λ¦­ νƒ€μ…**
- νƒ€μ… λ§¤κ°λ³€μμ— μ•„λ¬΄ μ μ•½λ„ λ‘μ§€ μ•λ”λ‹¤.
    - λ‹¨, κΈ°λ³Έ νƒ€μ…μ€ μ‚¬μ© ν•  μ μ—†λ‹¤ β†’ λ°•μ‹±λ κΈ°λ³Έ νƒ€μ…[(μ•„μ΄ν… 61)](https://shinminjin.github.io/posts/item61/)μ„ μ‚¬μ©ν•΄ μ°νν•  μ μλ‹¤.
- νƒ€μ… λ§¤κ°λ³€μμ— μ μ•½μ„ λ‘λ” μ λ„¤λ¦­ νƒ€μ…λ„ μλ‹¤.
    - ex. `java.util.concurrent.DelayQueue`
    - `class DelayQueue<E extends Delayed> implements BlockingQueue<E>`
        - `java.util.concurrent.Delayed`μ ν•μ„ νƒ€μ…λ§ λ°›λ”λ‹¤λ” λ»μ΄λ‹¤.
        - `DelayQueue` μ›μ†μ—μ„ ν•λ³€ν™ μ—†μ΄ κ³§λ°”λ΅ `Delayed` ν΄λμ¤μ λ©”μ„λ“λ¥Ό νΈμ¶ν•  μ μλ‹¤.
        - `ClassCastException` κ±±μ •μ€ ν•  ν•„μ”κ°€ μ—†λ‹¤.
- λ¨λ“  νƒ€μ…μ€ μκΈ° μμ‹ μ ν•μ„ νƒ€μ…μ΄λ―€λ΅ `DelayQueue<Delayed>`λ΅λ„ μ‚¬μ©κ°€λ¥ν•λ‹¤.


## **π’΅ ν•µμ‹¬ μ •λ¦¬**
- ν΄λΌμ΄μ–ΈνΈμ—μ„ μ§μ ‘ ν•λ³€ν™ν•΄μ•Ό ν•λ” νƒ€μ…λ³΄λ‹¤ μ λ„¤λ¦­ νƒ€μ…μ΄ μ•μ „ν•κ³  νΈν•λ‹¤.
- κΈ°μ΅΄ νƒ€μ… μ¤‘μ— μ λ„¤λ¦­μ΄μ–΄μ•Ό ν•λ”κ² μλ‹¤λ©΄, μ λ„¤λ¦­ νƒ€μ…μΌλ΅ λ³€κ²½ν•μ.
- κΈ°μ΅΄ ν΄λΌμ΄μ–ΈνΈμ—λ” μ•„λ¬΄ μν–¥λ„ μ£Όμ§€ μ•μΌλ©΄μ„ μ‚¬μ©μλ¥Ό νΈν•κ² ν•λ‹¤.


## **μ°Έκ³  π•¶οΈ**
### **ν•μ •μ  νƒ€μ… λ§¤κ°λ³€μ(Bounded Type Parameters)**
- [Bounded Type Parameters (The Javaβ„Ά Tutorials > Learning the Java Language > Generics (Updated))](https://docs.oracle.com/javase/tutorial/java/generics/bounded.html)
- λ§¤κ°λ³€μν™” νƒ€μ…μ„ νΉμ •ν• νƒ€μ…μΌλ΅ ν•μ • μ§“κ³  μ‹¶μ„ λ•, μ‚¬μ©ν•  μ μλ‹¤.
- `<E extends Number>` : μ„ μ–Έν•  μ μλ” μ λ„¤λ¦­ νƒ€μ…μ„ `Number`λ¥Ό **μƒμ†(extnds)**ν–κ±°λ‚ **κµ¬ν„(implements)**ν• ν΄λμ¤λ΅ μ ν•ν•λ‹¤.
- μ ν•ν• νƒ€μ…μ μΈμ¤ν„΄μ¤λ¥Ό λ§λ“¤κ±°λ‚, λ©”μ„λ“λ¥Ό νΈμ¶ν•  μλ„ μλ‹¤.
- `<E extedns Number>` : `Number` νƒ€μ…μ΄ μ κ³µν•λ” λ©”μ„λ“λ¥Ό μ‚¬μ©ν•  μ μλ‹¤.
- λ‹¤μμ νƒ€μ…μΌλ΅ ν•μ • ν•  μ μλ‹¤. μ΄ λ• ν΄λμ¤ νƒ€μ…μ„ κ°€μ¥ λ¨Όμ € μ„ μ–Έν•΄μ•Ό ν•λ‹¤.
- `<E extedns Numebr & Serializable>` : μ„ μ–Έν•  μ λ„¤λ¦­ νƒ€μ…μ€ `Integer`μ™€ `Number`λ¥Ό λ¨λ‘ μƒμ† λλ” κµ¬ν„ν• νƒ€μ…μ΄μ–΄μ•Ό ν•λ‹¤.
