---
title: Item 65 - ë¦¬í”Œë ‰ì…˜ë³´ë‹¤ëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë¼
date: 2024-05-03 18:15:00 +0900
categories: [ì´í™í‹°ë¸Œ ìë°”, chapter9]
tags: [ì´í™í‹°ë¸Œ ìë°”]
---
## **ë¦¬í”Œë ‰ì…˜(java.lang.reflect)ì˜ ê¸°ëŠ¥**

- íŠ¹ì • í´ë˜ìŠ¤ì˜ ìƒì„±ì, ë©”ì„œë“œ, í•„ë“œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.
    - ì¶”ê°€ì ìœ¼ë¡œ ë©¤ë²„ ì´ë¦„, í•„ë“œ íƒ€ì…, ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ ë“±ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.
    - ì‹¤ì œ ìƒì„±ì, ë©”ì„œë“œ, í•„ë“œë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆë‹¤.
    - `Method.invoke()`ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.
- ì»´íŒŒì¼ ë‹¹ì‹œì— ì¡´ì¬í•˜ì§€ ì•Šë˜ í´ë˜ìŠ¤ë„ ì´ìš©í•  ìˆ˜ ìˆë‹¤.

## **ë¦¬í”Œë ‰ì…˜ì˜ ë‹¨ì  ğŸ¤”**

- ì»´íŒŒì¼ íƒ€ì„ **íƒ€ì… ê²€ì‚¬**ì˜ ì´ì ì„ ëˆ„ë¦´ ìˆ˜ ì—†ë‹¤.
    - ëŸ°íƒ€ì„ì—ì„œì•¼ ì˜¤ë¥˜ë¥¼ ì•Œê²Œ ë  ê²ƒì´ë‹¤.
- ì½”ë“œê°€ ì§€ì €ë¶„í•˜ê³  ì¥í™©í•´ì§„ë‹¤.
- ì„±ëŠ¥ì´ ë–¨ì–´ì§„ë‹¤.
    - ë¦¬í”Œë ‰ì…˜ì„ í†µí•œ ë©”ì„œë“œ í˜¸ì¶œì€ ì¼ë°˜ ë©”ì„œë“œ í˜¸ì¶œë³´ë‹¤ í›¨ì”¬ ëŠë¦¬ë‹¤.

> ì½”ë“œ ë¶„ì„ ë„êµ¬ë‚˜ IOC ì»¨í…Œì´ë„ˆì¸ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì²˜ëŸ¼ ë¦¬í”Œë ‰ì…˜ì„ ì¨ì•¼í•˜ëŠ” ë³µì¡í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ëª‡ ìˆì§€ë§Œ ì´ëŸ° ë„êµ¬ë“¤ë§ˆì € ë¦¬í”Œë ‰ì…˜ ì‚¬ìš©ì„ ì ì°¨ ì¤„ì´ê³  ìˆë‹¤.

> ë¦¬í”Œë ‰ì…˜ì€ ì•„ì£¼ ì œí•œëœ í˜•íƒœë¡œë§Œ ì‚¬ìš©í•´ì•¼ ë‹¨ì ì„ í”¼í•˜ê³  ì´ì ë§Œ ì·¨í•  ìˆ˜ ìˆë‹¤.


### **ë¦¬í”Œë ‰ì…˜ í…ŒìŠ¤íŠ¸ì½”ë“œ ì‘ì„±**
```java
// ë¦¬í”Œë ‰ì…˜ìœ¼ë¡œ í™œìš©í•œ ì¸ìŠ¤í„´ìŠ¤í™” ë°ëª¨
public class ReflectiveInstantiation {
    // ë¦¬í”Œë ‰ì…˜ìœ¼ë¡œ ìƒì„±í•˜ê³  ì¸í„°í˜ì´ìŠ¤ë¡œ ì°¸ì¡°í•´ í™œìš©í•œë‹¤.
    public static void main(String[] args) {
        // í´ë˜ìŠ¤ ì´ë¦„ì„ Class ê°ì²´ë¡œ ë³€í™˜
        Class<? extends Set<String>> cl = null;
        try {
            cl = (Class<? extends Set<String>>)  // ë¹„ê²€ì‚¬ í˜•ë³€í™˜!
                    Class.forName(args[0]);
        } catch (ClassNotFoundException e) {
            fatalError("í´ë˜ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }

        // ìƒì„±ìë¥¼ ì–»ëŠ”ë‹¤.
        Constructor<? extends Set<String>> cons = null;
        try {
            cons = cl.getDeclaredConstructor();
        } catch (NoSuchMethodException e) {
            fatalError("ë§¤ê°œë³€ìˆ˜ ì—†ëŠ” ìƒì„±ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }

        // ì§‘í•©ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“ ë‹¤.
        Set<String> s = null;
        try {
            s = cons.newInstance();
        } catch (IllegalAccessException e) {
            fatalError("ìƒì„±ìì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        } catch (InstantiationException e) {
            fatalError("í´ë˜ìŠ¤ë¥¼ ì¸ìŠ¤í„´ìŠ¤í™”í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        } catch (InvocationTargetException e) {
            fatalError("ìƒì„±ìê°€ ì˜ˆì™¸ë¥¼ ë˜ì¡ŒìŠµë‹ˆë‹¤: " + e.getCause());
        } catch (ClassCastException e) {
            fatalError("Setì„ êµ¬í˜„í•˜ì§€ ì•Šì€ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.");
        }

        // ìƒì„±í•œ ì§‘í•©ì„ ì‚¬ìš©í•œë‹¤.
        s.addAll(Arrays.asList(args).subList(1, args.length));
        System.out.println(s);
    }

    private static void fatalError(String msg) {
        System.err.println(msg);
        System.exit(1);
    }
}
```
- í´ë˜ìŠ¤ ê²½ë¡œ ë¬¸ìì—´ì„ í†µí•´ í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ê°€ì ¸ì˜¤ê³ , ê°€ì ¸ì˜¨ í´ë˜ìŠ¤ë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆë‹¤.
- ìœ„ ì½”ë“œëŠ” `Set`ì„ í†µí•´ ë¬¸ìì—´ì„ ë‹¤ë¤„ë´¤ë‹¤. (`HashSet`, `TreeSet`í…ŒìŠ¤íŠ¸)

**java.util.HashSet ì˜ ê²°ê³¼**

**RunConfiguration:**  java.util.HashSet apple banana durian orange cherry
![HashSet](https://github.com/Shinminjin/Algorithm/assets/76575966/bf03e716-0b27-46b2-b038-351c7c7cd81a)
```bash
[banana, orange, apple, cherry, durian]
```
- ë¬´ì‘ìœ„ ìˆœì„œë¡œ ì¶œë ¥í•œë‹¤.

**java.util.TreeSet ì˜ ê²°ê³¼**

**RunConfiguration**: java.util.TreeSet apple banana durian orange cherry
![TreeSet](https://github.com/Shinminjin/Algorithm/assets/76575966/943e34db-eef2-458e-95b2-4bb5a1126109)
```bash
[apple, banana, cherry, durian, orange]
```
- ì•ŒíŒŒë²³ ìˆœì„œë¡œ ì¶œë ¥í•œë‹¤.

### **ì˜ˆì œì—ì„œ ë³´ëŠ” ë¦¬í”Œë ‰ì…˜ì˜ ë‹¨ì  ğŸ¤”**
- ëŸ°íƒ€ì„ì— 6ê°€ì§€ ì˜ˆì™¸ê°€ ë°œìƒ ê°€ëŠ¥í•˜ë‹¤.
    - ì œëŒ€ë¡œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•œë‹¤ë©´ ê³ ë ¤í•  ì ì´ ë„ˆë¬´ ë§ì„ ìˆ˜ ìˆë‹¤.
    - ë‹¤ë§Œ ìë°” 7ë¶€í„° `ReflectiveOperationException`ë¡œ ë¦¬í”Œë ‰ì…˜ ì˜ˆì™¸ë¥¼ ì¡ì„ ìˆ˜ ìˆë‹¤.
- í´ë˜ìŠ¤ ì´ë¦„ë§Œìœ¼ë¡œ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œëŠ” 25ì¤„ì˜ ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼ í•œë‹¤.
    - ì¼ë°˜ ìë°”ì½”ë“œë¥¼ ì“°ëŠ” ê²ƒë³´ë‹¤ ì••ë„ì ìœ¼ë¡œ ì½”ë“œê°€ ë§ë‹¤.

## **ğŸ’¡ í•µì‹¬ ì •ë¦¬**
- ë¦¬í”Œë ‰ì…˜ì€ ë³µì¡í•œ íŠ¹ìˆ˜ ì‹œìŠ¤í…œì„ ê°œë°œí•  ë•Œ í•„ìš”í•œ ê°•ë ¥í•œ ê¸°ëŠ¥ì´ì§€ë§Œ ë‹¨ì ë„ ë§ë‹¤.
- ì»´íŒŒì¼ ì‹œì ì— ì´ìš©í•  ìˆ˜ ì—†ëŠ” í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°, ë¦¬í”Œë ‰ì…˜ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
- ë‹¨, ë˜ë„ë¡ ê°ì²´ ìƒì„±ì—ë§Œ ì‚¬ìš©í•˜ê³  ìƒì„±í•œ ê°ì²´ë¥¼ ì´ìš©í•  ë•ŒëŠ” ì ì ˆí•œ ì¸í„°í˜ì´ìŠ¤ë‚˜ ì»´íŒŒì¼ íƒ€ì„ì— ì•Œ ìˆ˜ ìˆëŠ” ìƒìœ„ í´ë˜ìŠ¤ë¡œ í˜•ë³€í™˜í•´ ì‚¬ìš©í•˜ì.
