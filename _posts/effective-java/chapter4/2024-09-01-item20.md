---
title: Item 20 - μ¶”μƒ ν΄λμ¤λ³΄λ‹¤λ” μΈν„°νμ΄μ¤λ¥Ό μ°μ„ ν•λΌ
date: 2024-09-01 00:38:00 +0900
categories: [μ΄ν™ν‹°λΈ μλ°”, chapter4]
tags: [μ΄ν™ν‹°λΈ μλ°”]
---

## **μΈν„°νμ΄μ¤μ μ¥μ **
- μλ°” 8λ¶€ν„° μΈν„°νμ΄μ¤λ„ λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ κ³µν•  μ μλ‹¤.
- κΈ°μ΅΄ ν΄λμ¤μ— μ†μ‰½κ² μƒλ΅μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄ λ„£μ„ μ μλ‹¤.
    - BUT, μ¶”μƒ ν΄λμ¤λ” κ·Έλ ‡μ§€ μ•λ‹¤.
    - μƒλ΅ μ¶”κ°€λ μ¶”μƒ ν΄λμ¤μ λ¨λ“  μμ†μ΄ μƒμ† κµ¬μ΅°λ¥Ό κ°€μ§€λ©΄μ„ νΌλ€μ„ μ¤€λ‹¤.
- μΈν„°νμ΄μ¤λ” λ―Ήμ¤μΈ(mixin) μ •μμ— μ•μ„±λ§μ¶¤μ΄λ‹¤. (μ„ νƒμ μΈ κΈ°λ¥ μ¶”κ°€)
    - μ›λμ β€μ£Όλ νƒ€μ…β€™ μ™Έμ—λ„ νΉμ • μ„ νƒμ  ν–‰μ„λ¥Ό μ κ³µν•λ‹¤κ³  μ„ μ–Έν•λ” ν¨κ³Όλ¥Ό μ¤€λ‹¤.
    - BUT, μ¶”μƒ ν΄λμ¤λ” κ·Έλ ‡μ§€ μ•λ‹¤. - λ‘ λ¶€λ¨λ¥Ό λ‘ μ μ—†κΈ° λ•λ¬Έμ΄λ‹¤.
- μΈν„°νμ΄μ¤λ” κ³„μΈµκµ¬μ΅°κ°€ μ—†λ” νƒ€μ… ν”„λ μ„μ›ν¬λ¥Ό λ§λ“¤ μ μλ‹¤.
    - Singer, Songwriterλ¥Ό λ¨λ‘ κµ¬ν„ν•΄λ„ λ¬Έμ λμ§€ μ•λ”λ‹¤.

```java
public interface Singer {
    // ...
}

public interface Songwriter {
    // ...
}

public interface SingerSongWriter extends Singer, Songwriter {
    // ...
}
```
- λνΌ ν΄λμ¤μ™€ ν•¨κ» μ‚¬μ©ν•λ©΄ μΈν„°νμ΄μ¤λ” κΈ°λ¥μ„ ν–¥μƒ μ‹ν‚¤λ” μ•μ „ν•κ³  κ°•λ ¥ν• μλ‹¨μ΄ λλ‹¤.
    - BUT, μ¶”μƒ ν΄λμ¤λ” κΈ°λ¥ μ¶”κ°€ λ°©λ²•μ΄ μƒμ†λ°–μ— μ—†μ–΄μ„ ν™μ©λ„κ°€ λ–¨μ–΄μ§„λ‹¤.


## **λ””ν΄νΈ λ©”μ„λ“**
- μΈν„°νμ΄μ¤μ λ©”μ„λ“ μ¤‘ κµ¬ν„μ΄ λ…λ°±ν• κ²ƒμ€ μΈν„°νμ΄μ¤μ λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•  μ μλ‹¤.
- ν•μ§€λ§ Object ν΄λμ¤μ λ©”μ„λ“λ¥Ό λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•λ©΄ μ•λλ‹¤. μ™..π¤” ?
    - Object ν΄λμ¤μ λ©”μ„λ“λ” λ¨λ“  ν΄λμ¤κ°€ μ•”λ¬µμ μΌλ΅ μƒμ†λ°›λ” κΈ°λ³Έ λ©”μ„λ“λ‹¤.
        - μ΄λ―Έ λ¨λ“  κ°μ²΄μ— λ€ν•΄ κµ¬ν„λμ–΄ μλ‹¤λ” μλ―Έ.
    - Object ν΄λμ¤μ λ©”μ„λ“λ¥Ό λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•λ©΄, μΈν„°νμ΄μ¤κ°€ ν΄λμ¤λ¥Ό μ΄κ²¨λ²„λ¦¬λ” μƒν™©μ΄λ‹¤.
    - λ””ν΄νΈ λ©”μ„λ“ ν•µμ‹¬ λ©μ μ€ β€μΈν„°νμ΄μ¤μ μ§„ν™”β€.


## **μΈν„°νμ΄μ¤μ™€ μ¶”μƒ κ³¨κ²© κµ¬ν„ ν΄λμ¤(skeletal implementation)**
- Template Method ν¨ν„΄
    - μΈν„°νμ΄μ¤μ™€ μ¶”μƒ ν΄λμ¤μ μ¥μ μ„ λ¨λ‘ μ·¨ν•  μ μλ‹¤.
- μΈν„°νμ΄μ¤λ΅λ” νƒ€μ…μ„ μ‰½κ² μ •μν•κ³ , ν•„μ”ν•λ‹¤λ©΄ λ””ν΄νΈ λ©”μ„λ“ λ‡ κ°λ„ ν•¨κ» μ κ³µν•λ‹¤.
- κ³¨κ²© κµ¬ν„ ν΄λμ¤λ” λ‚λ¨Έμ§€ λ©”μ„λ“λ“¤κΉμ§€ κµ¬ν„ν•λ‹¤.

### **μμ‹ μ½”λ“**

```java
// Appliance μΈν„°νμ΄μ¤
public interface Appliance {
    void turnOn();
    void turnOff();
    void use();
    void doRoutine();
}
```

```java
// WashingMachine ν΄λμ¤
public class WashingMachine implements Appliance {
    @Override
    public void turnOn() {
        System.out.println("Powering on the appliance");
    }
    
    @Override
    public void turnOff() {
        System.out.println("Powering off the appliance");
    }
    
    @Override
    public void use() {
        System.out.println("Washing clothes...");
    }
    
    @Override
    public void doRoutine() {
        greet();
        eat();
        sleep();
    }
}
```

```java
// Microwave ν΄λμ¤
public class Microwave implements Appliance {
    @Override
    public void turnOn() {
        System.out.println("Powering on the appliance");
    }
    
    @Override
    public void turnOff() {
        System.out.println("Powering off the appliance");
    }
    
    @Override
    public void use() {
        System.out.println("Heating food...");
    }
    
    @Override
    public void doRoutine() {
        greet();
        eat();
        sleep();
    }
}
```
- `WashingMachine`κ³Ό `Microwave` ν΄λμ¤λ” `Appliance` μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•κ³  μλ‹¤.
- λ‘ ν΄λμ¤λ” `use()`λ¥Ό μ μ™Έν• λ¨λ“  λ©”μ„λ“ λ™μ‘μ΄ κ°™λ‹¤.
    - μ¶”μƒ κ³¨κ²© ν΄λμ¤λ΅ μ¤‘λ³µ μ½”λ“ μ κ±° κ°€λ¥!


```java
// μ¶”μƒκ³¨κ²© κµ¬ν„ ν΄λμ¤ (λ³΄ν†µ Abstract~ λ„¤μ΄λ°μ„ μ‚¬μ©)
public abstract class AbstractAppliance implements Appliance {
    // κ°™μ€ λ™μ‘μ„ ν•λ” μ½”λ“λ“¤λ§ μ¬μ •μν•λ‹¤.
    @Override
    public void turnOn() {
        System.out.println("Powering on the appliance");
    }
    
    @Override
    public void turnOff() {
        System.out.println("Powering off the appliance");
    }
    
    @Override
    public void doRoutine() {
        turnOn();
        use();
        turnOff();
    }
}
```

```java
// WashingMachine ν΄λμ¤
public class WashingMachine extends AbstractAppliance {
    @Override
    public void use() {
        System.out.println("Washing clothes...");
    }
}
```

```java
// Microwave ν΄λμ¤
public class Microwave extends AbstractAppliance {
    @Override
    public void use() {
        System.out.println("Heating food...");
    }
}
```

> λ‹¨μν κ³¨κ²© κµ¬ν„μ„ ν™•μ¥ν•λ” κ²ƒλ§μΌλ΅ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ”λ° ν•„μ”ν• μΌμ΄ μ™„λ£λλ‹¤.


## **μ‹λ®¬λ μ΄νΈν• λ‹¤μ¤‘ μƒμ†(simulated multiple inheritance)**
- λ‹¤μ¤‘ μƒμ†μ λ§μ€ μ¥μ μ„ μ κ³µν•λ” λ™μ‹μ— λ‹¨μ μ€ ν”Όν•κ² ν•΄μ¤€λ‹¤.
- μ–΄λ–¤ ν΄λμ¤κ°€ μƒμ† λ°›μ•„μ•Ό ν•λ” ν΄λμ¤κ°€ μ΄λ―Έ μμ–΄μ„ μ¶”μƒ κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό μƒμ† λ°›μ§€ λ»ν•λ‹¤λ©΄ μ‹λ®¬λ μ΄νΈν• λ‹¤μ¤‘ μƒμ†μ„ μ‚¬μ©ν•  μ μλ‹¤.

### **μμ‹μ½”λ“**
- WashingMachineμ΄ Electronicμ„ μƒμ†λ°›μ•„μ•Ό ν•΄μ„ μ¶”μƒ κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό μƒμ†λ°›μ§€ λ»ν•  κ²½μ°
    - μ‹λ®¬λ μ΄νΈν• λ‹¤μ¤‘μƒμ† μ΄μ©ν•μ!

```java
// κΈ°λ³Έμ μΈ Electronic κΈ°κΈ° ν΄λμ¤
public class Electronic {
    public void checkVoltage() {
        System.out.println("Checking voltage...");
    }
}
```

```java
// κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό ν™•μ¥ν• ν΄λμ¤
public class InnerAbstractAppliance extends AbstractAppliance {
    @Override
    public void use() {
        System.out.println("Using a general appliance...");
    }
}
```

```java
// HomeAppliance ν΄λμ¤
public class HomeAppliance extends Electronic implements Appliance {
    // ν™•μ¥λ κ³¨κ²© κµ¬ν„μ„ private ν•„λ“λ΅ μ •μ
    private InnerAbstractAppliance innerAbstractAppliance = new InnerAbstractAppliance();
    
    @Override
    public void turnOn() {
        // κ° λ©”μ„λ“ νΈμ¶μ„ λ‚΄λ¶€ ν΄λμ¤μ μΈμ¤ν„΄μ¤μ— μ „λ‹¬
        innerAbstractAppliance.turnOn();
    }
    
    @Override
    public void turnOff() {
        innerAbstractAppliance.turnOff();
    }
    
    @Override
    public void use() {
        innerAbstractAppliance.use();
    }
    
    @Override
    public void doRoutine() {
        checkVoltage(); // μ „μ•• μ²΄ν¬ κΈ°λ¥μ„ μ¶”κ°€
        innerAbstractAppliance.doRoutine();
    }
}
```

```java
// κµ¬μ²΄μ μΈ Appliance κµ¬ν„ ν΄λμ¤
public class WashingMachine extends HomeAppliance {
    @Override
    public void use() {
        System.out.println("Washing clothes...");
    }
}

public class Microwave extends HomeAppliance {
    @Override
    public void use() {
        System.out.println("Heating food...");
    }
}
```

### **κ³¨κ²© κµ¬ν„ μ‘μ„± λ‹¨κ³„**
1. μΈν„°νμ΄μ¤ λ‚΄μ— λ‹¤λ¥Έ λ©”μ„λ“λ“¤μ κµ¬ν„μ— μ‚¬μ©λλ” κΈ°λ° λ©”μ„λ“λ“¤μ„ μ„ μ •ν•λ‹¤.
    - ν•΄λ‹Ή κΈ°λ° λ©”μ„λ“λ“¤μ€ κ³¨κ²© κµ¬ν„μ—μ„λ” μ¶”μƒ λ©”μ„λ“κ°€ λ  κ²ƒ μ΄λ‹¤.
2. κΈ°λ° λ©”μ„λ“λ“¤μ„ μ‚¬μ©ν•μ—¬ μ§μ ‘ κµ¬ν„ν•  μ μλ” λ©”μ„λ“λ“¤μ€ λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•λ‹¤.
    - λ‹¨ Object λ©”μ„λ“λ” μ μ™Έν•λ‹¤.
3. κΈ°λ° λ©”μ„λ“λ‚ λ””ν΄νΈ λ©”μ„λ“λ΅ λ§λ“¤μ§€ λ»ν• λ©”μ„λ“κ°€ μλ‹¤λ©΄, ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” κ³¨κ²© κµ¬ν„ ν΄λμ¤μ—μ„ μ‘μ„±ν•μ.


## **λ‹¨μ κµ¬ν„(simple implementation)**
- μƒμ†μ„ μ„ν•΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν–μ§€λ§ μ¶”μƒ ν΄λμ¤κ°€ μ•„λ‹ κ²ƒ.


## **π’΅ ν•µμ‹¬ μ •λ¦¬**
- λ‹¤μ¤‘ κµ¬ν„μ© νƒ€μ…μΌλ΅λ” μΈν„°νμ΄μ¤κ°€ κ°€μ¥ μ ν•©ν•λ‹¤.
- λ³µμ΅ν• μΈν„°νμ΄μ¤λΌλ©΄ κ³¨κ²© κµ¬ν„μ„ ν•¨κ» μ κ³µν•λ” λ°©λ²•μ„ κ³ λ ¤ν•μ.
- κ³¨κ²© κµ¬ν„μ€ κ°€λ¥ν• ν• μΈν„°νμ΄μ¤μ λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•μ—¬ ν•΄λ‹Ή μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• ν΄λμ¤μ—μ„ ν™μ©ν•λ„λ΅ ν•λ” κ²ƒμ΄ μΆ‹λ‹¤.
